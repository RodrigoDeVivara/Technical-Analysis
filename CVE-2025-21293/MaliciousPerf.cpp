#include <Windows.h>
#include <iostream>

extern "C" __declspec(dllexport) DWORD APIENTRY OpenPerfData(LPWSTR pContext)
{
    return ERROR_SUCCESS;
}

extern "C" __declspec(dllexport) DWORD APIENTRY ClosePerfData()
{
    return ERROR_SUCCESS;
}

extern "C" __declspec(dllexport) DWORD APIENTRY CollectPerfData(LPWSTR pQuery, PVOID* ppData, LPDWORD pcbData, LPDWORD pObjectsReturned)
{
    // Открывает командную строку и печатает сообщение
    WinExec("cmd.exe /k echo Hello from Rodrigo! =)", SW_SHOW);
    return ERROR_SUCCESS;
}

extern "C" BOOL WINAPI DllMain(HINSTANCE hInst, DWORD reason, LPVOID reserved)
{
    return TRUE;
}
